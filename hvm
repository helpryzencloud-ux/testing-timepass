#!/bin/bash
set -e

echo "ðŸ”„ === Updating system ==="
sudo apt update -y && sudo apt upgrade -y

echo "ðŸ“¦ === Installing required dependencies ==="
sudo apt install -y sudo python3-full python3-pip git curl nano

echo "ðŸ“¦ Installing Python Libraries"
pip3 install flask flask-socketio flask_login docker paramiko python-dotenv psutil flask-limiter

echo "â¬‡ï¸ === Downloading HVM V3 ==="
git clone https://github.com/ItsMePara123/HVMV3-CRACKED
cd HVMV3-CRACKED

echo "ðŸ” Generating SECRET KEY"
SECRET=$(python3 -c "import secrets; print(secrets.token_hex(32))")

echo "ðŸ“ Creating .env file"

cat > .env << EOF
#Panel Configuration
SECRET_KEY=$SECRET
ADMIN_USERNAME=admin
ADMIN_PASSWORD=admin123
PANEL_NAME=HVM VPS Panel
WATERMARK=HVM VPS Service
WELCOME_MESSAGE=Welcome to HVM VPS Panel

#VPS Configuration
MAX_VPS_PER_USER=5
DEFAULT_OS_IMAGE=ubuntu:22.04
DOCKER_NETWORK=hvm_network
MAX_CONTAINERS=50

#Server Configuration
SERVER_IP=$(curl -s ifconfig.me)
SERVER_PORT=3000
DEBUG=False

#Email Configuration (Optional)
SMTP_SERVER=
SMTP_PORT=
SMTP_USER=
SMTP_PASS=
NOTIFICATION_EMAIL=
EOF

echo "ðŸš€ Starting HVM Panel..."
python3 hvm.py

echo "ðŸŽ‰ HVM Installed Successfully!"
echo "ðŸ”‘ Login: admin / admin123"
echo "ðŸŒ Visit Panel: http://$(curl -s ifconfig.me):3000"
